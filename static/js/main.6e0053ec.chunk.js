(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{12:function(e,t,a){e.exports={header:"Searchbar_header__3iZBp",label:"Searchbar_label__LPkER",icon:"Searchbar_icon__QjrDj",input:"Searchbar_input__2pgiA"}},13:function(e,t,a){e.exports={backdrop:"Modal_backdrop__2j6mc",modal:"Modal_modal__3JrSB",button:"Modal_button__2rbWt",close:"Modal_close__1lUeA"}},16:function(e,t,a){e.exports={item:"ImageGalleryItem_item__19mi4"}},17:function(e,t,a){e.exports={wrapper:"Loader_wrapper__1hS7y",loader:"Loader_loader__4Fbwg"}},30:function(e,t,a){e.exports={list:"ImageGallery_list__YMAi8"}},32:function(e,t,a){e.exports={button:"ButtonMore_button__uuq1Q"}},38:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(5),s=a.n(o),c=(a(38),a(18)),i=a(10),l=a.n(i),u=a(11),d=a(6),h=a(7),p=a(9),m=a(8),g=(a(40),a(86)),b=a(27),j=a(28),f=a(12),v=a.n(f),y=a(2),O=document.querySelector("#header-root"),x=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:null},e.onChange=function(t){var a=t.target.value;e.setState({value:a}),e.props.handleQuery(a)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=Object(g.a)();return Object(o.createPortal)(Object(y.jsx)("header",{className:v.a.header,children:Object(y.jsxs)("label",{htmlFor:e,className:v.a.label,children:[Object(y.jsx)(j.a,{className:v.a.icon}),Object(y.jsx)(b.DebounceInput,{className:v.a.input,debounceTimeout:500,id:e,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.value,onChange:this.onChange})]})}),O)}}]),a}(n.Component),k=a(29),_=a.n(k),C="https://pixabay.com/api/",w="21989340-5677ac132e2fa2f040ad0925d",S=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r,o,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.page,n=void 0===a?1:a,r=t.query,e.prev=1,e.next=4,_()("".concat(C,"?q=").concat(r,"&page=").concat(n,"&key=").concat(w,"&image_type=photo&orientation=horizontal&per_page=").concat(12));case 4:return o=e.sent,e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),I=a(16),M=a.n(I),q=function(e){var t=e.url,a=e.tags,n=e.onClick,r=e.largeImage;return Object(y.jsx)("li",{className:M.a.item,children:Object(y.jsx)("img",{className:M.a.image,src:t,alt:a,onClick:function(){return n(r)}})})},N=a(30),L=a.n(N),E=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){e.images!==this.props.images&&this.props.images.length>12&&window.matchMedia("(min-width: 1600px)").matches&&(window.scrollTo({top:document.documentElement.scrollHeight-1090,behavior:"smooth"}),console.log("more and more"))}},{key:"render",value:function(){var e=this.props,t=e.images,a=e.handleClickImage;return Object(y.jsx)("ul",{className:L.a.list,children:t.map((function(e){return Object(y.jsx)(q,{url:e.webformatURL,largeImage:e.largeImageURL,tags:e.tags,onClick:a},"".concat(e.id," ").concat(e.webformatURL))}))})}}]),a}(n.Component),B=a(31),U=a(13),A=a.n(U),Q=document.querySelector("#modal-root"),D=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getTags=function(){var t=e.props,a=t.url,n=t.images.find((function(e){return e.largeImageURL===a}));if(n)return n.tags},e.handleEscClose=function(t){"Escape"===t.code&&e.props.handleCloseModal()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleEscClose),document.body.style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleEscClose),document.body.style.overflow="auto"}},{key:"render",value:function(){var e=this;return Object(o.createPortal)(Object(y.jsxs)("div",{className:A.a.backdrop,onClick:function(t){return e.props.handleBackdropClose(t)},children:[Object(y.jsx)("button",{className:A.a.button,type:"button","aria-label":"Close",onClick:this.props.handleCloseModal,children:Object(y.jsx)(B.a,{className:A.a.close})}),Object(y.jsx)("div",{className:A.a.modal,children:Object(y.jsx)("img",{src:this.props.url,alt:this.getTags()})})]}),Q)}}]),a}(n.Component),H=a(32),R=a.n(H),F=function(e){var t=e.handleClickLoadMore;return Object(y.jsx)("button",{className:R.a.button,type:"button",onClick:t,children:"Load more"})},P=a(33),T=a.n(P),G=a(17),J=a.n(G),W=document.querySelector("#loading-root"),z=function(){return Object(o.createPortal)(Object(y.jsx)("div",{className:J.a.wrapper,children:Object(y.jsx)(T.a,{className:J.a.loader,type:"Oval",color:"#3faae5",height:75,width:75})}),W)},Y=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:null,page:1,images:[],quantityImages:0,totalHits:0,selectedImage:null,status:"idle"},e.handleQuery=function(t){var a=t.trim().split(" ").filter((function(e){return""!==e&&" "!==e})).join("+");e.setState({query:a})},e.handleClickImage=function(t){e.setState({selectedImage:t})},e.handleCloseModal=function(){e.setState({selectedImage:null})},e.handleBackdropClose=function(t){"IMG"!==t.target.nodeName&&e.handleCloseModal()},e.handleClickLoadMore=function(){e.setState((function(e){return{page:e.page+1}}))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(){var e=Object(u.a)(l.a.mark((function e(t,a){var n,r,o,s,i,d,h=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.page,o=n.query,s=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({page:r,query:o});case 2:return t=e.sent,h.setState({totalHits:t.data.totalHits}),e.abrupt("return",t.data.hits);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a.query===o){e.next=12;break}if(!(""===o.trim()||o.length<2)){e.next=5;break}return e.abrupt("return");case 5:return this.setState({status:"pending"}),e.next=8,s();case 8:i=e.sent,this.setState({images:i}),this.setState({quantityImages:this.state.images.length}),this.setState({status:"resolved"});case 12:if(a.page===r){e.next=20;break}return this.setState({status:"pending"}),e.next=16,s();case 16:d=e.sent,this.setState((function(e){return{images:[].concat(Object(c.a)(e.images),Object(c.a)(d))}})),this.setState({quantityImages:this.state.images.length}),this.setState({status:"resolved"});case 20:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.selectedImage,a=e.images,n=e.status,r=a.length>0&&this.state.quantityImages<this.state.totalHits,o="pending"===n;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(x,{handleQuery:this.handleQuery}),o&&Object(y.jsx)(z,{}),Object(y.jsx)(E,{images:this.state.images,handleClickImage:this.handleClickImage}),r&&Object(y.jsx)(F,{handleClickLoadMore:this.handleClickLoadMore}),t&&Object(y.jsx)(D,{url:this.state.selectedImage,images:this.state.images,handleCloseModal:this.handleCloseModal,handleBackdropClose:this.handleBackdropClose})]})}}]),a}(n.Component);s.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(Y,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.6e0053ec.chunk.js.map