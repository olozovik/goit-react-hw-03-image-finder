{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/Loader/Loader.module.css","components/ImageGallery/ImageGallery.module.css","components/ButtonMore/ButtonMore.module.css","components/Searchbar/Searchbar.jsx","api/fetchImages.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Modal/Modal.jsx","components/ButtonMore/ButtonMore.jsx","components/Loader/Loader.jsx","App.jsx","index.js"],"names":["module","exports","headerRoot","document","querySelector","Searchbar","state","value","onChange","e","target","setState","props","handleQuery","inputId","uuidv4","createPortal","className","s","header","htmlFor","label","icon","input","debounceTimeout","id","type","autoComplete","autoFocus","placeholder","this","Component","baseURL","key","fetchImages","a","page","query","axios","data","console","log","message","ImageGalleryItem","url","tags","onClick","largeImage","item","image","src","alt","ImageGallery","prevProps","images","length","window","matchMedia","matches","scrollTo","top","documentElement","scrollHeight","behavior","handleClickImage","list","map","webformatURL","largeImageURL","modalRoot","Modal","getTags","selectedImage","find","handleEscClose","code","handleCloseModal","addEventListener","body","style","overflow","removeEventListener","backdrop","handleBackdropClose","button","close","modal","ButtonMore","handleClickLoadMore","loadingRoot","Loader","wrapper","loader","color","height","width","App","quantityImages","totalHits","status","trim","split","filter","join","nodeName","prevState","_","getImages","hits","receivedImages","p","isLoadPossible","isLoading","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6e0053ec.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Searchbar_header__3iZBp\",\"label\":\"Searchbar_label__LPkER\",\"icon\":\"Searchbar_icon__QjrDj\",\"input\":\"Searchbar_input__2pgiA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__2j6mc\",\"modal\":\"Modal_modal__3JrSB\",\"button\":\"Modal_button__2rbWt\",\"close\":\"Modal_close__1lUeA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__19mi4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Loader_wrapper__1hS7y\",\"loader\":\"Loader_loader__4Fbwg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"ImageGallery_list__YMAi8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ButtonMore_button__uuq1Q\"};","import { Component } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nimport { DebounceInput } from 'react-debounce-input';\nimport { FaSearch } from 'react-icons/fa';\nimport { createPortal } from 'react-dom';\nimport s from './Searchbar.module.css';\n\nconst headerRoot = document.querySelector('#header-root');\n\nclass Searchbar extends Component {\n  state = {\n    value: null,\n  };\n\n  onChange = e => {\n    const value = e.target.value;\n    this.setState({ value });\n    this.props.handleQuery(value);\n  };\n\n  render() {\n    const inputId = uuidv4();\n    return createPortal(\n      <header className={s.header}>\n        <label htmlFor={inputId} className={s.label}>\n          <FaSearch className={s.icon} />\n          <DebounceInput\n            className={s.input}\n            debounceTimeout={500}\n            id={inputId}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.value}\n            onChange={this.onChange}\n          />\n        </label>\n      </header>,\n      headerRoot,\n    );\n  }\n}\n\nexport { Searchbar };\n","import axios from 'axios';\n\nconst baseURL = 'https://pixabay.com/api/';\nconst key = '21989340-5677ac132e2fa2f040ad0925d';\nconst perPage = 12;\n\nconst fetchImages = async ({ page = 1, query } = {}) => {\n  try {\n    const data = await axios(\n      `${baseURL}?q=${query}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=${perPage}`,\n    );\n    return data;\n  } catch (e) {\n    console.log(e.message);\n  }\n};\n\nexport { fetchImages };\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ url, tags, onClick, largeImage }) => {\n  return (\n    <li className={s.item}>\n      <img\n        className={s.image}\n        src={url}\n        alt={tags}\n        onClick={() => onClick(largeImage)}\n      />\n    </li>\n  );\n};\n\nexport { ImageGalleryItem };\n\nImageGalleryItem.propTypes = {\n  url: PropTypes.string,\n  tags: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n  largeImage: PropTypes.string,\n};\n","import PropTypes from 'prop-types';\nimport { ImageGalleryItem } from './ImageGalleryItem/ImageGalleryItem';\nimport s from './ImageGallery.module.css';\nimport { Component } from 'react';\n\nclass ImageGallery extends Component {\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.images !== this.props.images &&\n      this.props.images.length > 12 &&\n      window.matchMedia('(min-width: 1600px)').matches\n    ) {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight - 1090,\n        behavior: 'smooth',\n      });\n      console.log('more and more');\n    }\n  }\n\n  static propTypes = {\n    images: PropTypes.array,\n    handleClickImage: PropTypes.func.isRequired,\n  };\n\n  render() {\n    const { images, handleClickImage } = this.props;\n    return (\n      <ul className={s.list}>\n        {images.map(image => (\n          <ImageGalleryItem\n            key={`${image.id} ${image.webformatURL}`}\n            url={image.webformatURL}\n            largeImage={image.largeImageURL}\n            tags={image.tags}\n            onClick={handleClickImage}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport { ImageGallery };\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport { IoCloseCircleOutline } from 'react-icons/io5';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    document.addEventListener('keydown', this.handleEscClose);\n    document.body.style.overflow = 'hidden';\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.handleEscClose);\n    document.body.style.overflow = 'auto';\n  }\n\n  getTags = () => {\n    const { url, images } = this.props;\n    const selectedImage = images.find(image => image.largeImageURL === url);\n    if (selectedImage) {\n      return selectedImage.tags;\n    }\n  };\n\n  handleEscClose = e => {\n    if (e.code === 'Escape') {\n      this.props.handleCloseModal();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div\n        className={s.backdrop}\n        onClick={e => this.props.handleBackdropClose(e)}\n      >\n        <button\n          className={s.button}\n          type={'button'}\n          aria-label={'Close'}\n          onClick={this.props.handleCloseModal}\n        >\n          <IoCloseCircleOutline className={s.close} />\n        </button>\n        <div className={s.modal}>\n          <img src={this.props.url} alt={this.getTags()} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport { Modal };\n","import s from './ButtonMore.module.css';\n\nconst ButtonMore = ({ handleClickLoadMore }) => {\n  return (\n    <button className={s.button} type={'button'} onClick={handleClickLoadMore}>\n      Load more\n    </button>\n  );\n};\n\nexport { ButtonMore };\n","import LoaderOval from 'react-loader-spinner';\nimport { createPortal } from 'react-dom';\nimport s from './Loader.module.css';\n\nconst loadingRoot = document.querySelector('#loading-root');\n\nconst Loader = () => {\n  return createPortal(\n    <div className={s.wrapper}>\n      <LoaderOval\n        className={s.loader}\n        type=\"Oval\"\n        color=\"#3faae5\"\n        height={75}\n        width={75}\n      />\n    </div>,\n    loadingRoot,\n  );\n};\n\nexport { Loader };\n","import { Component } from 'react';\nimport 'modern-normalize/modern-normalize.css';\nimport { Searchbar } from './components/Searchbar/Searchbar';\nimport { fetchImages } from 'api/fetchImages';\nimport { ImageGallery } from './components/ImageGallery/ImageGallery';\nimport { Modal } from 'components/Modal/Modal';\nimport { ButtonMore } from './components/ButtonMore/ButtonMore';\nimport { Loader } from 'components/Loader/Loader';\n\nclass App extends Component {\n  async componentDidUpdate(_, prevState) {\n    const { page, query } = this.state;\n    const getImages = async () => {\n      const data = await fetchImages({ page, query });\n      this.setState({ totalHits: data.data.totalHits });\n      return data.data.hits;\n    };\n\n    if (prevState.query !== query) {\n      if (query.trim() === '' || query.length < 2) {\n        return;\n      }\n      this.setState({ status: 'pending' });\n      const receivedImages = await getImages();\n      this.setState({\n        images: receivedImages,\n      });\n      this.setState({\n        quantityImages: this.state.images.length,\n      });\n      this.setState({ status: 'resolved' });\n    }\n\n    if (prevState.page !== page) {\n      this.setState({ status: 'pending' });\n      const receivedImages = await getImages();\n      this.setState(p => ({\n        images: [...p.images, ...receivedImages],\n      }));\n      this.setState({ quantityImages: this.state.images.length });\n      this.setState({ status: 'resolved' });\n    }\n  }\n\n  state = {\n    query: null,\n    page: 1,\n    images: [],\n    quantityImages: 0,\n    totalHits: 0,\n    selectedImage: null,\n    status: 'idle',\n  };\n\n  handleQuery = value => {\n    const query = value\n      .trim()\n      .split(' ')\n      .filter(item => item !== '' && item !== ' ')\n      .join('+');\n    this.setState({ query });\n  };\n\n  handleClickImage = largeImage => {\n    this.setState({ selectedImage: largeImage });\n  };\n\n  handleCloseModal = () => {\n    this.setState({ selectedImage: null });\n  };\n\n  handleBackdropClose = e => {\n    if (e.target.nodeName !== 'IMG') {\n      this.handleCloseModal();\n    }\n  };\n\n  handleClickLoadMore = () => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  render() {\n    const { selectedImage, images, status } = this.state;\n    const isLoadPossible =\n      images.length > 0 && this.state.quantityImages < this.state.totalHits;\n    const isLoading = status === 'pending';\n    return (\n      <>\n        <Searchbar handleQuery={this.handleQuery} />\n        {isLoading && <Loader />}\n        <ImageGallery\n          images={this.state.images}\n          handleClickImage={this.handleClickImage}\n        />\n        {isLoadPossible && (\n          <ButtonMore handleClickLoadMore={this.handleClickLoadMore} />\n        )}\n        {selectedImage && (\n          <Modal\n            url={this.state.selectedImage}\n            images={this.state.images}\n            handleCloseModal={this.handleCloseModal}\n            handleBackdropClose={this.handleBackdropClose}\n          />\n        )}\n      </>\n    );\n  }\n}\n\nexport { App };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}